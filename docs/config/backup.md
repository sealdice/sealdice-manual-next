---
lang: zh-cn
title: 备份
---

# 备份

::: info 本节内容

本节将介绍关于备份、自动备份、自动清理旧备份的相关设置。

在本节中的一些部分，你将使用到 cron 表达式。这是一种表达一个或一系列时间点的语法。你可以参考以下内容以学习 cron 表达式。

**请注意**，海豹核心使用**不含秒数、由 5 个部分组成**的 cron 格式，这也是 Linux 系统中使用的格式；而不是包含秒数、由 6 个部分组成的格式。

- [Cron 解释器](https://crontab.guru/)（英文）
- [菜鸟教程](https://www.runoob.com/w3cnote/linux-crontab-tasks.html)

:::

## 关于备份

经常备份是避免数据损失的最佳手段。海豹核心默认提供每 12 小时一次的自动备份。海豹核心产生的所有备份都位于 `backups/` 目录下。

从 <Badge type="tip" text="v1.4.6"/> 起，备份文件的命名遵循以下格式：`bak_年月日_时分秒[_auto]_rXX_XXXXXXXX.zip`。

如果你使用的是 <Badge type="tip" text="v1.4.5"/> 或之前版本，文件名格式是：`bak-年月日_时分秒[_auto]_随机数.zip`。

文件名中含有 `auto` 字样的是自动生成的备份。

你也可以对备份行为进行设置。相关设置均位于 WebUI 的「综合设置 - 备份」页面。

在此页面上，你将看到：自动备份设置、自动清理设置、当前备份文件列表。在更改任何设置后，你需要点击右上角的「保存设置」使之生效。

## 手动备份

点击页面右上角的「立即备份」按钮，可以立即生成一份备份。

从 <Badge type="tip" text="v1.4.6"/> 起，你可以在手动备份时调整备份范围。

## 自动备份

勾选「开启」启用自动备份。

在「备份间隔」项可以通过 cron 表达式规定自动备份的时机。

从 <Badge type="tip" text="v1.4.6"/> 起，在「备份范围」项，你可选择每次自动备份的范围。

## 自动清理

在「清理模式」中选择「保留一定数量」或「保留一定时间内」启用自动清理。

### 配置清理范围

在「保留一定数量」模式下，自动清理时将保留最新的指定数量的备份文件，更老的文件将被删除。

在「保留一定时间内」模式下，自动清理时将保留创建时间在指定时间范围内的备份文件，更老的文件将被删除。

### 配置清理时机

勾选「触发方式」中的「自动备份后」和/或「定时」以设置自动清理时机。两种触发方式可以同时使用。

如果勾选了「自动备份后」，在每次自动备份完成后将执行一次自动清理。

如果勾选了「定时」，按输入的 cron 表达式指定自动清理的时机。

## 备份列表

在「已备份文件」中按时间从新到旧列出了当前存在的备份文件。

你可通过「进入批量删除页面」进行手动批量删除。

点击每一个备份文件右边的「下载」以下载对应文件，点击垃圾桶图标按钮以删除单个备份文件。
