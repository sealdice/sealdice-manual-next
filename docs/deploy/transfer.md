---
lang: zh-cn
title: 迁移
---

# 迁移

::: info 本节内容

本节将会指导你如何迁移现有的海豹核心。

:::

海豹核心的数据文件全平台通用。因此，在不同平台间迁移时，你只需要准备每个平台的可执行文件。

::: warning

在进行任何迁移时，你都应**确保**迁出和迁入的海豹核心都**未在运行**，否则可能造成不可逆的数据损坏。

:::

## 相同平台间迁移

将整个海豹核心目录复制到新的位置即可。

如果目录体积较大，你可以自行删除 `backups/` 下的备份文件。这不会造成数据损失。

## 跨平台迁移

跨平台迁移时不能使用旧的可执行文件，而只迁移数据部分。

将迁出海豹核心中的 `data/` 目录以你习惯的任何方式打包。

在迁入平台准备一份全新的海豹核心，用打包的数据覆盖迁入海豹的对应目录。

如果你希望保留旧的备份文件，你可以复制迁出海豹 `backups/` 目录中的内容，放置于迁入海豹的对应目录。备份文件也是通用的。

### Linux 服务器间跨架构迁移（arm64 → amd64）

步骤与普通跨平台迁移一致。在运行新海豹核心时，如果文件权限不正确，可以在海豹核心目录下执行以下两条命令：

```bash
find . -type f | xargs chmod 644
find . -type d | xargs chmod 755
```

## 迁移数据到手机

如果你需要把电脑海豹的数据迁移到手机海豹上，同样是迁移海豹的 `data/` 目录。步骤如下：

1. 关闭你的电脑海豹，复制电脑海豹的 `data/` 目录发送到手机上。
2. 点击手机海豹的 **导出数据** 按钮，在设置中勾选 **文件同步模式**。（平时推荐关闭这个选项，这里是为了替换数据库特别地需要开启）
3. 在你习惯的手机文件管理软件中找到 `根目录/document/com.sealdice.dice/sealdice`，用迁出海豹的 data 目录替换这里面的 data 目录。
4. 回到手机海豹的界面中点击 **导入数据**。导入完成后再点击启动核心，这时你的手机海豹里就应该是旧海豹的数据了。导入完成后也可以把「文件同步模式」关闭了。

::: warning

在手机海豹上，每次导入数据前都进行一次导出，导出后不要再运行海豹核心。

这是因为，手机海豹**不会**实时更新导出的文件，它们是海豹数据在导出时的一份快照。

如果在上次导出后产生了新数据，而再次进行导入，会导致新产生的数据被之前导出的数据覆盖，丢失这段时间以来录入的角色卡、Log、修改的自定义文案等海豹内部的数据。

:::
